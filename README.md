# ğŸ“ Code Snippets Manager 
###### for Assesment Code Think41

###### Explanation to Tech used by Shashank( Not AI)  
ORM is used here to map the queries from command execution. So an example, a POST command along with insert logic triggers a INSERT statement command in my SQLite database. Translating execution logic and commands to queries is what is done by ORM. Database used here is a SQLite database which is a relational file based database. 
Python FastAPI is used as a middleware layer to expose API endpoints

If a API suppports all forms of REST methods, then it is RESTful compliant.

This backend service allows users to save, retrieve, and manage their personal code snippets. Built with FastAPI and SQLite, this application provides a complete REST API for code snippet management with a simple web interface for demonstration.

## Features

- **User Management**: Support for multiple users with unique identifiers
- **CRUD Operations**: Create, Read, Update, and Delete code snippets
- **Language Filtering**: Filter snippets by programming language
- **Automatic Timestamps**: Track creation and modification dates
- **Unique Naming**: Ensure snippet names are unique per user
- **RESTful API**: Clean, well-documented API endpoints
- **Simple Web Interface**: HTML frontend for easy testing and demonstration

### Prerequisites
- Python 3.8+
- pip (Python package installer)

### Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd code-snippets-manager
   ```

2. **Set up virtual environment and install dependencies**
   ```bash
   # Run the setup script
   chmod +x setup.sh
   ./setup.sh
   
   # Or manually:
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. **Start the server**
   ```bash
   python main.py
   # Or with uvicorn:
   uvicorn main:app --reload
   ```

4. **Access the application**
   - API Documentation: http://localhost:8000/docs
   - Simple Web Interface: Open `index.html` in your browser
   - API Base URL: http://localhost:8000

### Running the Demo

```bash
# Make sure the server is running, then:
python demo.py
```

## ğŸ“š API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/` | API health check |
| `POST` | `/users/{user_str_id}/snippets` | Create or update a snippet |
| `GET` | `/users/{user_str_id}/snippets/{snippet_name}` | Get specific snippet |
| `GET` | `/users/{user_str_id}/snippets` | List all user snippets |
| `DELETE` | `/users/{user_str_id}/snippets/{snippet_name}` | Delete a snippet |
| `GET` | `/users/{user_str_id}/snippets/language/{language}` | Filter snippets by language |

### Example Usage

**Create a snippet:**
```bash
curl -X POST "http://localhost:8000/users/john_doe/snippets" \
     -H "Content-Type: application/json" \
     -d '{
       "snippet_name": "hello_world",
       "language": "python",
       "code_content": "print(\"Hello, World!\")"
     }'
```

**Get all snippets for a user:**
```bash
curl "http://localhost:8000/users/john_doe/snippets"
```

## ğŸ› ï¸ Technology Stack

### Core Framework & Runtime
- **FastAPI** (v0.104.1) - Modern, fast web framework for building APIs with Python
- **Python** (3.8+) - Programming language
- **Uvicorn** (v0.24.0) - ASGI web server implementation

### Database & ORM
- **SQLite** - Lightweight, file-based relational database
- **SQLAlchemy** (v2.0.23) - Python SQL toolkit and Object-Relational Mapping (ORM)

### Data Validation & Serialization
- **Pydantic** - Data validation and settings management using Python type annotations
- **python-multipart** (v0.0.6) - For handling form data and file uploads

### Frontend Technologies
- **HTML5** - Markup language for web interface
- **CSS3** - Styling with modern features (Grid, Flexbox, Gradients)
- **Vanilla JavaScript** - Client-side functionality and API interactions
- **Fetch API** - For making HTTP requests to the backend

### Development & Testing Tools
- **Virtual Environment (venv)** - Python environment isolation
- **Requests** - HTTP library for Python (used in demo script)
- **JSON** - Data interchange format

### Documentation & API Tools
- **OpenAPI/Swagger** - API documentation (auto-generated by FastAPI)
- **ReDoc** - Alternative API documentation interface

## ğŸ—ï¸ High-Level Design (HLD)

### System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Client    â”‚                           â”‚   API Client    â”‚
â”‚   (Browser)     â”‚                           â”‚   (Script/App)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                             â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                          HTTP/HTTPS Requests
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       Load Balancer        â”‚
                    â”‚     (Optional/Future)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      FastAPI Server        â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚   API Routes        â”‚  â”‚
                    â”‚   â”‚   - Users           â”‚  â”‚
                    â”‚   â”‚   - Snippets        â”‚  â”‚
                    â”‚   â”‚   - Health Check    â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚  Business Logic     â”‚  â”‚
                    â”‚   â”‚  - CRUD Operations  â”‚  â”‚
                    â”‚   â”‚  - Validation       â”‚  â”‚
                    â”‚   â”‚  - Error Handling   â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚   Data Models       â”‚  â”‚
                    â”‚   â”‚   - User Model      â”‚  â”‚
                    â”‚   â”‚   - Snippet Model   â”‚  â”‚
                    â”‚   â”‚   - Pydantic Models â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                          SQLAlchemy ORM
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      SQLite Database       â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚   users Table       â”‚  â”‚
                    â”‚   â”‚   - user_str_id(PK) â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚   â”‚  snippets Table     â”‚  â”‚
                    â”‚   â”‚  - id (PK)          â”‚  â”‚
                    â”‚   â”‚  - user_str_id (FK) â”‚  â”‚
                    â”‚   â”‚  - snippet_name     â”‚  â”‚
                    â”‚   â”‚  - language         â”‚  â”‚
                    â”‚   â”‚  - code_content     â”‚  â”‚
                    â”‚   â”‚  - created_at       â”‚  â”‚
                    â”‚   â”‚  - updated_at       â”‚  â”‚
                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Overview

#### 1. **Presentation Layer**
- **Web Interface**: Simple HTML/CSS/JS frontend for demonstration
- **API Documentation**: Auto-generated Swagger UI and ReDoc
- **Client Applications**: Any HTTP client can consume the API

#### 2. **Application Layer**
- **FastAPI Framework**: Handles HTTP requests/responses
- **Route Handlers**: Process API endpoints
- **Middleware**: CORS, authentication (future), logging
- **Validation**: Request/response validation using Pydantic

#### 3. **Business Logic Layer**
- **User Management**: Handle user creation and validation
- **Snippet Operations**: CRUD operations for code snippets
- **Data Validation**: Ensure data integrity and business rules
- **Error Handling**: Graceful error responses and logging

#### 4. **Data Access Layer**
- **SQLAlchemy ORM**: Object-relational mapping
- **Database Models**: Define table structures and relationships
- **Session Management**: Handle database connections and transactions

#### 5. **Data Storage Layer**
- **SQLite Database**: Lightweight, serverless database
- **File-based Storage**: Single database file for easy deployment

### Data Flow

1. **Request Flow**: Client â†’ FastAPI â†’ Business Logic â†’ Data Layer â†’ Database
2. **Response Flow**: Database â†’ Data Layer â†’ Business Logic â†’ FastAPI â†’ Client
3. **Error Flow**: Any Layer â†’ Error Handler â†’ FastAPI â†’ Client (with appropriate HTTP status)

## ğŸ”§ Low-Level Design (LLD)

### Database Schema

#### Users Table
```sql
CREATE TABLE users (
    user_str_id VARCHAR PRIMARY KEY
);
```

#### Snippets Table
```sql
CREATE TABLE snippets (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_str_id VARCHAR NOT NULL,
    snippet_name VARCHAR NOT NULL,
    language VARCHAR NOT NULL,
    code_content TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_str_id) REFERENCES users(user_str_id),
    UNIQUE(user_str_id, snippet_name)
);
```

### Class Diagrams

#### Database Models
```python
class User:
    - user_str_id: str (Primary Key)
    
class Snippet:
    - id: int (Primary Key, Auto-increment)
    - user_str_id: str (Foreign Key)
    - snippet_name: str
    - language: str
    - code_content: str
    - created_at: datetime
    - updated_at: datetime
```

#### Pydantic Models
```python
class SnippetCreate:
    - snippet_name: str
    - language: str
    - code_content: str
    
class SnippetResponse:
    - snippet_name: str
    - language: str
    - code_content: str
    - created_at: datetime
    - updated_at: datetime
    
class SnippetSummary:
    - snippet_name: str
    - language: str
    - updated_at: datetime
```

### API Endpoint Details

#### 1. Create/Update Snippet
- **Endpoint**: `POST /users/{user_str_id}/snippets`
- **Logic Flow**:
  ```
  1. Validate request body using SnippetCreate model
  2. Ensure user exists (create if not found)
  3. Check if snippet with same name exists
  4. If exists: Update existing snippet
  5. If not exists: Create new snippet
  6. Return SnippetResponse model
  ```

#### 2. Get Specific Snippet
- **Endpoint**: `GET /users/{user_str_id}/snippets/{snippet_name}`
- **Logic Flow**:
  ```
  1. Query database for snippet with user_id and name
  2. If found: Return SnippetResponse model
  3. If not found: Return 404 HTTP exception
  ```

#### 3. List User Snippets
- **Endpoint**: `GET /users/{user_str_id}/snippets`
- **Logic Flow**:
  ```
  1. Query all snippets for the user
  2. Return list of SnippetSummary models
  3. Return empty list if no snippets found
  ```

#### 4. Delete Snippet
- **Endpoint**: `DELETE /users/{user_str_id}/snippets/{snippet_name}`
- **Logic Flow**:
  ```
  1. Query database for snippet with user_id and name
  2. If found: Delete from database
  3. If not found: Return 404 HTTP exception
  4. Return success message
  ```

#### 5. Filter by Language
- **Endpoint**: `GET /users/{user_str_id}/snippets/language/{language}`
- **Logic Flow**:
  ```
  1. Query snippets for user filtered by language (case-insensitive)
  2. Return list of SnippetSummary models
  3. Return empty list if no matches found
  ```

### Error Handling Strategy

#### HTTP Status Codes
- **200 OK**: Successful GET requests
- **201 Created**: Successful POST requests (new resource)
- **404 Not Found**: Resource doesn't exist
- **422 Unprocessable Entity**: Validation errors
- **500 Internal Server Error**: Unexpected server errors

#### Error Response Format
```json
{
    "detail": "Error message description"
}
```
#### Current Implementation
- **Input Validation**: Pydantic models validate all inputs
- **SQL Injection Prevention**: SQLAlchemy ORM prevents SQL injection
- **Data Sanitization**: Automatic escaping of special characters

#### Future Enhancements
- **Authentication**: JWT token-based authentication
- **Authorization**: Role-based access control
- **Rate Limiting**: Prevent API abuse
- **HTTPS**: Secure communication
- **API Keys**: Client identification and throttling

### Performance Considerations

#### Current Optimizations
- **Database Indexing**: Primary keys and foreign keys indexed
- **Connection Pooling**: SQLAlchemy handles connection efficiency
- **Lightweight Database**: SQLite for fast read/write operations

#### Scalability Options
- **Database Migration**: PostgreSQL/MySQL for production
- **Caching**: Redis for frequently accessed snippets
- **Load Balancing**: Multiple server instances
- **Database Optimization**: Query optimization and indexing strategies

### File Structure
```
code-snippets-manager/
â”œâ”€â”€ main.py                 # FastAPI application and route handlers
â”œâ”€â”€ demo.py                 # API demonstration script
â”œâ”€â”€ index.html              # Simple web interface
â”œâ”€â”€ setup.sh                # Environment setup script
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ README.md              # Project documentation
â”œâ”€â”€ snippets.db            # SQLite database (created at runtime)
â””â”€â”€ venv/                  # Virtual environment (created during setup)
```

## ğŸ§ª Testing

The project includes a comprehensive demo script that tests all API endpoints:

- User creation and management
- Snippet CRUD operations
- Language-based filtering
- Error handling scenarios
- Multiple user scenarios

Run the demo with: `python demo.py`

## ğŸ“„ License

This project is open source and available under the [MIT License](LICENSE).
- Made by Shashank Benakatti
